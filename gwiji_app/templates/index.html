{% extends 'base.html' %}
{% load static %}

{% block main %} 
<section class="hero__section-body">
    <div class="hero__section-analytics">
        <div class="hero__section-analytics-container">
            <div class="hero__section-analytics-container-header">
                <h1>Empower an African Entrepreneur Today!</h1>
                <p>Invest Early and Securely in African Startups with the Power of Automation.</p>
            </div>
            <div class="hero__section-analytics-container-body">
                <div class="hero__section-analytics-item">
                    <h3 class="hero__section-analytics-startups">
                        {{no_of_startups}}
                    </h3>
                    <p>african startups.</p>
                    
                </div>
                <div class="hero__section-analytics-item">
                    <h3 class="hero__section-analytics-money-raised">
                        {{amount_crowdfunded}}
                    </h3>
                    <p>crowdfunded.</p>
                    
                   
                </div>
                <div class="hero__section-analytics-item">
                    <h3 class="hero__section-analytics-investors">
                        {{no_of_investors}}
                    </h3>
                    <p>global investors.</p>
                   
                </div>
            </div>
            
        </div>

    </div>
    <!-- <h4 class="featured-tag-title"> <i class='bx bx-star' ></i>
        FEATURED</h4>
    <div class=" swiper mySwiper">
        <div class="hero__section-projects swiper-wrapper">
            {% for campaign in campaigns %}
                <div class="hero__section-projects-item swiper-slide">
                        {% if campaign.campaign_picture  %}
                        <div class="hero__section-projects-item-left">
                            <a href="{% url 'campaigns' campaign.id %}">
                                <img src="{{ campaign.campaign_picture.url }}" alt="{{ campaign.campaign_picture.url }}">
                            </a>
                        </div>
                        {% else %}
                        <div class="hero__section-projects-item-left">
                            <a href="{% url 'campaigns' campaign.id %}">
                                <img src="{% static 'images/project.jpeg' %}" alt="">
                            </a>
                        </div>
                        {% endif %}
                        <div class="hero__section-projects-item-right">
                            <div class="hero__section-projects-item-right-top">
                                <p class="hero__featured-project-category">
                                    
                                    <span>{{campaign.project.category}} </span>
                                    <span>
                                        {% if campaign in followed_campaigns %}
                                            <i class='bx bxs-heart follow' data-campaign-id="{{ campaign.id }}"></i>
                                        {% else %}
                                            <i class='bx bx-heart follow' data-campaign-id="{{ campaign.id }}"></i>
                                        {% endif %}
                                    </span>     
                                    
                                </p>
                                <a href="{% url 'campaigns' campaign.id %}">
                                    <h3 class="hero__featured-project-title">
                                        {{campaign.title}}
                                    </h3>
                                </a>
                                
                                <p class="hero__featured-project-description">
                                    {{campaign.subtitle}}
                                </p>
                            </div>
                            <div class="hero__section-projects-item-right-bottom">
                                <div class="hero__featured-project-fund-container">
                                    <div class="hero__featured-project-fund-subcontainer">
                                        <span class="hero__featured-project-current-raise">
                                            $<p class="current-raise">{{ campaign.current_raise }}</p>
                                        </span>
                                        
                                        <span>
                                            of 
                                        </span>
                                        <span class="hero__featured-project-total-raised">
                                            $<p class="total-raised">{{ campaign.target }}</p>
                                        </span>
                                        <span>raised.</span>
                                    </div>
                                    <div>
                                        <span class="hero__featured-project-progress">
                                            {{ campaign.percentage_raised }}%
                                        </span>
                                    </div>
                                    
                                </div>
                                <div class="hero__featured-project-progress-bar">
                                    <progress class="hero__project-progress" value="{{ campaign.percentage_raised }}" max="100"></progress>
                                </div>
                                <div class="hero__featured-project-campaign-time">
                                    <i class='bx bx-time-five'></i>
                                    <p id="time-left-{{ campaign.id }}">Calculating...</p>
                                    <script>
                                        // Get the campaign start and end dates as JavaScript Date objects
                                        var startDate = new Date("{{ campaign.date_start|date:'Y-m-d H:i:s' }}");
                                        var endDate = new Date("{{ campaign.date_end|date:'Y-m-d H:i:s' }}");

                                        // Calculate the time difference in milliseconds
                                        var timeDifference = endDate - new Date();

                                        // Calculate the number of days and hours left
                                        var daysLeft = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
                                        var hoursLeft = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));

                                        // Get the element to display the time left
                                        var timeLeftElement = document.getElementById("time-left-{{ campaign.id }}");

                                        // Display the time left
                                        if (daysLeft > 0) {
                                            timeLeftElement.textContent = daysLeft + " day(s) left";
                                        } else if (hoursLeft > 0) {
                                            timeLeftElement.textContent = hoursLeft + " hour(s) left";
                                        } else {
                                            timeLeftElement.textContent = "Less than 1 hour left";
                                        }
                                    </script>
                                </div>
                            </div>
                        </div>
                </div>
            
            {% endfor %}
        </div>
        
    </div>
    <div class="swiper-pagination"></div> -->

</section>

{% endblock %}
{% block submain %} 

<section class="campaigns-community__section">
    <div class="campaigns__container">
        <div class="campaign__container-search">
            <input type="search" name="" id="search-input" placeholder="Search for campaigns">
        </div>
        <div class="campaign__container-category-filter">
            <p>Category Filters: </p>
            <input type="button" id="all" class="category__filters-item-btn" value="All" onclick="filterCampaigns(this, 'all')">
            {% for choice in category_choices %}
                    <span class="campaign__category-filters-item">
                        <input type="button" id="{{choice}}" class="category__filters-item-btn" value="{{choice}}" onclick="filterCampaigns(this, '{{ choice }}')"">
                    </span>
            {% endfor %}
            <input type="button" id="reset" class="category__filters-item-btn" value="Reset Filters" onclick="filterCampaigns(this, 'all')">
            <br>
            <p>Other Filters: </p>
            <select name="" id="">
                <option value="">Project Timing</option>
                <option value="">Launching Soon</option>
                <option value="">Ending Soon</option>
                <option value="">Just Launched</option>
            </select>
            <select name="" id="">
                <option value="">Sort By</option>
                <option value="">Trending</option>
                <option value="">Most Funded</option>
            </select>
        </div>
        <div id="filtered-campaigns-container" class="campaign__container-results">
            {% if campaigns %}
            {% for campaign in campaigns %}
            <div class="browse__campaign-item " data-category="{{ campaign.project.category }}">
                {% if campaign.campaign_picture  %}
                <div class="browse__campaign-item-top">
                    <a href="{% url 'campaigns' campaign.id %}">
                        <img src="{{ campaign.campaign_picture.url }}" alt="{{ campaign.campaign_picture.url }}">
                    </a>
                </div>
                {% else %}
                <div class="browse__campaign-item-top">
                    <img src="{% static 'images/project.jpeg' %}" alt="">
                </div>
                {% endif %}
                <div class="browse__campaign-item-bottom">
                    <div class="browse__campaign-item-bottom-top">
                        <p class="browse__campaign-category">
                            <span>{{campaign.project.category}}</span>
                            <span>
                                {% if campaign in followed_campaigns %}
                                    <i class='bx bxs-heart follow' data-user-id="{{ request.user }}" data-campaign-id="{{ campaign.id }}"></i>
                                {% else %}
                                    <i class='bx bx-heart follow' data-user-id="{{ request.user }}" data-campaign-id="{{ campaign.id }}"></i>
                                {% endif %}
                            </span>                            
                        </p>
                            <a href="{% url 'campaigns' campaign.id %}">
                                <h3 class="browse__campaign-title">
                                    {{campaign.title}}
                                </h3>
                            </a>
                        <p class="browse__campaign-description">
                            {{campaign.subtitle}}
                        </p>
                    </div>
                    <div class="browse__campaign-item-bottom-bottom">
                        <div class="browse__campaign-fund-container">
                            <div class="browse__campaign-fund-subcontainer">
                                
                                <span class="browse__campaign-current-raise">
                                    $<p class="current-raise">{{ campaign.current_raise }}</p>
                                </span>
                                <span>
                                    of 
                                </span>
                                <span class="browse__campaign-total-raised">
                                    $<p class="total-raised">{{ campaign.target }}</p>
                                </span>
                                <span>raised.</span>
                            </div>
                            <div>
                                <span class="browse__campaign-progress">
                                    {{ campaign.percentage_raised }}%
                                </span>
                            </div>
                            
                        </div>
                        <div class="browse__campaign-progress-bar">
                            <progress class="browse__campaign-progress" value="{{ campaign.percentage_raised }}" max="100"></progress>
                        </div>
                        <div class="browse__campaign-campaign-time">
                            <i class='bx bx-time-five'></i>
                            <p id="campaign-time-left-{{ campaign.id }}">Calculating...</p>
                            <script>
                                // Get the campaign start and end dates as JavaScript Date objects
                                var startDate = new Date("{{ campaign.date_start|date:'Y-m-d H:i:s' }}");
                                var endDate = new Date("{{ campaign.date_end|date:'Y-m-d H:i:s' }}");
    
                                // Calculate the time difference in milliseconds
                                var timeDifference = endDate - new Date();
    
                                // Calculate the number of days and hours left
                                var daysLeft = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
                                var hoursLeft = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    
                                // Get the element to display the time left
                                var timeLeftElement = document.getElementById("campaign-time-left-{{ campaign.id }}");
    
                                // Display the time left
                                if (daysLeft > 0) {
                                    timeLeftElement.textContent = daysLeft + " day(s) left";
                                } else if (hoursLeft > 0) {
                                    timeLeftElement.textContent = hoursLeft + " hour(s) left";
                                } else {
                                    timeLeftElement.textContent = "Less than 1 hour left";
                                }
                            </script>
                        </div>
                    </div>
    
    
                </div>
            
            </div>
            {% endfor %}
            {% else %}
            <div class="no-campaigns">
                <p id="no-filter-campaigns">No Campaign to display.</p>
            </div>
            {% endif %}
        </div>
        <div class="no-campaigns">
            <p id="no-filter-campaigns">No Campaign to display.</p>
        </div>
    </div>
    

    <div class="communities__container">
        <div class="community-post__feed__container">
            <div class="community-post__feed-top">
                <div class="community-post__feed-top__header">
                    <span data-authenticated="true" class="user-profile-avatar"><img src="{% static 'images/user.png'%}" alt=""></span>
                    <span data-authenticated="true" class="post__placeholder-text"><textarea id="post__text" type="text" placeholder="Tell the community what you want..."></textarea> </span>
                </div>
                <div class="community-post__feed__buttons">
                    <i data-authenticated="true" class='bx bx-smile'></i>
                    <i data-authenticated="true" class='bx bxs-image-add'></i>
                    <i data-authenticated="true" class='bx bxs-file-gif' ></i>
                    <button data-authenticated="true" id="post__btn" class="post__feed" >Post</button>
                </div>
            </div>
        </div>
        <div class="community__posts-container">
            {% if posts %}
                {% for post in posts %}
                <div class="community__posts-item">
                    <div class="community__posts-item_header">
                        <div class="community__posts-item_header-left">
                            {% if post.profile.avatar  %}
                            <span class="community__post-avatar"><img src="{{ post.profile.avatar.url }}" alt="">
                            </span>
                            {% else %}
                            <span class="community__post-avatar"><img src="{% static 'images/user.png'%}" alt="">
                            </span>
                            {% endif %}
                            <span class="community__post-name">
                                <span class="community__post-display-name">{{post.profile.display_name}}</span>
                                <span class="community__post-badge">
                                    {% if post.profile.verification_status == "Verified"%}
                                    <i class=' verified bx bxs-badge-check '></i>
                                    <div class="pending-id-container">
                                       <p>User Identity is verified.</p>
                                    </div>
                                    {% elif post.profile.verification_status == "Pending"%}
                                    <i class='bx bxs-error-circle pending'></i>
                                    <div class="pending-id-container">
                                       <p>User Identity Verification is ongoing. </p>
                                    </div>
                                    {% elif post.profile.verification_status == "NotVerified" %}  
                                    <i class='bx bxs-error not-verified' ></i>
                                    <div class="pending-id-container">
                                       <p>User has not verified their identity. </p>
                                    </div>
                                 {%  endif %}
                                </span>
                                <span class="community__post-username">@{{post.profile.username}}</span>
                                <span class="community__post-symbol">·</span>
                                <span class="community__post-time" data-post-timestamp="{{ post.post_date | date:'U' }}">{{ post.post_date }} ago</span>
                            </span>
                        </div>
                    </div>
                    <div class="community__posts-item_body">
                        <p> 
                            {% if post.campaign %}
                            <a class="community__posts-item_campaign-tag" href="{% url 'campaigns' post.campaign.id %}"> 
                                #{{post.campaign.title}}        
                            </a>
                            {% endif %}
                            {{post.post_text}} 
                        </p>

                        {% if post.post_image  %}
                        <span>
                            <img src="{{ post.post_image.url }}" alt="">
                        </span>     
                        {% endif %}
                    </div>
                    <div class="community__posts-item_footer">
                        {% if profile in post.likes.all %}
                        <i data-authenticated="true" id="post-like" data-post-id="{{ post.id }}" class='bx bxs-heart like' >{{post.no_post_likes}}</i>
                        {% else %}
                        <i data-authenticated="true" id="post-like" data-post-id="{{ post.id }}" class='bx bx-heart like' >{{post.no_post_likes}}</i>
                        {% endif %}
                        <i data-authenticated="true" class='bx bx-comment-detail'>{{post.no_post_comments}}</i>
                      
                    </div>
                    <div class="community__posts-item_comment">
                        <input data-authenticated="true" class="post-comment-text" data-post-id="{{ post.id }}" type="text" placeholder="Comment..">
                        <button data-authenticated="true" class="post-comment-btn" data-post-id="{{ post.id }}"><i class='bx bxs-send'></i></button>
                   </div>
                    <div class="community__posts-item_comment-box">
                        {% if post.comments.all %}
                        {% for comment in post.comments.all reversed%}
                        <div class="community__posts-item_header-left comment__head">
                            {% if comment.comment_author.avatar  %}
                            <span class="community__post-avatar"><img src="{{ comment.comment_author.avatar.url }}" alt="">
                            </span>
                            {% else %}
                            <span class="community__post-avatar"><img src="{% static 'images/user.png'%}" alt="">
                            </span>
                            {% endif %}
                            <div class="">
                                <span class="community__post-name">
                                    <span class="community__post-display-name">{{comment.comment_author.display_name}}</span>
                                    <span class="community__post-badge"><i class='bx bxs-badge-check'></i></span>
                                    <span class="community__post-username">@{{comment.comment_author.user}}</span>
                                    <span class="community__post-symbol">·</span>
                                    <span class="community__post-time time" data-post-timestamp="{{ comment.comment_date | date:'U' }}">{{ comment.comment_date }} ago</span>
                                </span>
                            </div>
                        </div>
                        <span class="post__comment-text">
                            <p> 
                                {{comment.comment_text}}
                            </p>
                        </span>
                        {%  endfor %}
                        {% else %}
                        <div class="post__no-comments">
                            <span>No comments yet.</span>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
             
            {% else %}
              
                <div class="community__no-posts">
                    <h1>No Posts Yet. </h1>
                </div>
            {% endif %}
          
            
        </div>
    </div>
</section>


<section class="how-it-works__section">
    <div class="how-it-works__item">
        <div class="how-it-works__header">
            <h1>
                How it  <span>Works For Investors</span>
            </h1>
        </div>
        <div class="how-it-works__steps">
            <div class="how-it-works__step">
                <div class="how-it-works__step-icon">
                    <i class='bx bxs-keyboard'></i>
                </div>
                <h2>Discover Afrocorns</h2>
                <p>Discover a thoughtfully curated array of promising Afrocorns, African startups with exceptional growth prospects.</p>
            </div>
            <div class="how-it-works__step">
                <div class="how-it-works__step-icon">
                    <i class='bx bx-money-withdraw'></i>
                </div>
                <h2>Invest Securely</h2>
                <p>Crowdfund your chosen Afrocorn securely, becoming a proud shareholder in the future of Africa.</p>
            </div>
            <div class="how-it-works__step">
                <div class="how-it-works__step-icon">
                    <i class='bx bxs-plane-take-off'></i>
                </div>
                <h2>Watch Them Grow</h2>
                <p>Support the growth of Afrocorns as they innovate and achieve milestones, together.</p>
            </div>
        </div>
    </div>
    <div class="how-it-works__item">
        <div class="how-it-works__header">
            <h1>
                How it  <span>Works for Founders</span>
            </h1>
        </div>
        <div class="how-it-works__steps">
            <div class="how-it-works__step">
                <div class="how-it-works__step-icon">
                    <i class='bx bx-add-to-queue' ></i>
                </div>
                <h2>Create Your Campaign</h2>
                <p>Start by creating a compelling crowdfunding campaign for your startup. Provide details about your project, funding goals, and rewards for backers.</p>
            </div>
            <div class="how-it-works__step">
                <div class="how-it-works__step-icon">
                    <i class='bx bxs-share-alt' ></i>
                </div>
                <h2>Share Your Campaign</h2>
                <p>Spread the word about your campaign to your network and beyond. Utilize social media, email, and other marketing channels to attract potential investors.</p>
            </div>
            <div class="how-it-works__step">
                <div class="how-it-works__step-icon">
                    <i class='bx bx-user-voice'></i>
                </div>
                <h2>Attract Investors</h2>
                <p>Engage with investors who believe in your vision. Answer questions, provide updates, and build a strong relationship with your backers.</p>
            </div>
        </div>
    </div>
    
</section>




<section class="cta__section">
    <div class="cta__container">
        <div class="cta__left-container">
            <div class="cta__header">
                <h1>Invest in early stage startups with Gwiji</h1>
                
            </div>
            <div class="cta__description">
               <p>Crowdfund a promising Afrocorn of your choice and become a shareholder!</p> 
            </div>
            <div class="cta__button">
                <a href="#login"><button>Invest Now!</button></a>
            </div>
        
        </div>
        <div class="cta__right-container">
            <div class="cta__image-container">
                <img src="{% static 'images/afrocorn.png'%}" alt="">
            </div>
        </div>
    </div>
</section>



<section class="faq__section">
    <div class="faq__header">
        <h1>
            Frequently Asked <span>Questions</span>
        </h1>
    </div>
    <div class="faq__body">
        <div class="faq__container-items">
            <div class="faq__container-item">
                <div class="faq__top">
                    <div class="faq__title">
                        <p>What is Gwiji all about ?</p>
                    </div>
                    <div class="faq__icons">
                        <i class='bx bx-chevron-down'></i>
                        <i class='bx bx-chevron-up'></i>
                    </div>
                </div>
                <div class="faq__answer">
                    Gwiji is a crowdfunding platform designed to empower African founders by connecting them with investors who believe in their innovative ideas. It provides a space for African startups to raise the capital they need to turn their visions into reality.
                </div>
            
            </div>
            <div class="faq__container-item">
                <div class="faq__top">
                    <div class="faq__title">
                        <p>Who can use Gwiji?</p>
                    </div>
                    <div class="faq__icons">
                        <i class='bx bx-chevron-down'></i>
                        <i class='bx bx-chevron-up'></i>
                    </div>
                </div>
                <div class="faq__answer">
                    Gwiji is open to both African founders seeking funding for their startups and investors interested in supporting African entrepreneurship. We welcome anyone who shares our commitment to fostering innovation in Africa.
                </div>
            
            </div>
            <div class="faq__container-item">
                <div class="faq__top">
                    <div class="faq__title">
                        <p>How do I get started on Gwiji as a founder?</p>
                    </div>
                    <div class="faq__icons">
                        <i class='bx bx-chevron-down'></i>
                        <i class='bx bx-chevron-up'></i>
                    </div>
                </div>
                <div class="faq__answer">
                    To get started as a founder, simply register on the platform, complete your profile, and create a campaign detailing your startup's mission, goals, and funding needs. Our user-friendly interface will guide you through the process.
                </div>
            
            </div>
            <div class="faq__container-item">
                <div class="faq__top">
                    <div class="faq__title">
                        <p>What types of startups are eligible to raise funds on Gwiji?</p>
                    </div>
                    <div class="faq__icons">
                        <i class='bx bx-chevron-down'></i>
                        <i class='bx bx-chevron-up'></i>
                    </div>
                </div>
                <div class="faq__answer">
                    Gwiji welcomes a diverse range of startups across various industries, from tech and healthcare to agriculture and education. As long as your startup has a clear mission and a viable plan, you can raise funds on our platform.


                </div>
            
            </div>
            <div class="faq__container-item">
                <div class="faq__top">
                    <div class="faq__title">
                        <p>How does Gwiji ensure the security of financial transactions?</p>
                    </div>
                    <div class="faq__icons">
                        <i class='bx bx-chevron-down'></i>
                        <i class='bx bx-chevron-up'></i>
                    </div>
                </div>
                <div class="faq__answer">
                    Gwiji employs cutting-edge security measures and encryption protocols to safeguard all financial transactions. We take user data privacy and financial security seriously, and our automated systems ensure secure fund transfers.
                </div>
            
            </div>
            <div class="faq__container-item">
                <div class="faq__top">
                    <div class="faq__title">
                        <p>Can I invest in multiple campaigns on Gwiji?</p>
                    </div>
                    <div class="faq__icons">
                        <i class='bx bx-chevron-down'></i>
                        <i class='bx bx-chevron-up'></i>
                    </div>
                </div>
                <div class="faq__answer">
                    Absolutely! Investors have the flexibility to support multiple campaigns that align with their interests and investment goals. Gwiji offers a diverse range of opportunities to invest in promising startups.
                </div>
            
            </div>
            <div class="faq__container-item">
                <div class="faq__top">
                    <div class="faq__title">
                        <p>What is the cost of using Gwiji?</p>
                    </div>
                    <div class="faq__icons">
                        <i class='bx bx-chevron-down'></i>
                        <i class='bx bx-chevron-up'></i>
                    </div>
                </div>
                <div class="faq__answer">
                    Gwiji offers a freemium model. It's free for founders and investors to register, create profiles, and explore campaigns. We generate revenue through a nominal transaction cost, typically a percentage of the capital raised during campaigns.
                </div>
            
            </div>
            <div class="faq__container-item">
                <div class="faq__top">
                    <div class="faq__title">
                        <p>What are the benefits of the premium options for founders and investors?</p>
                    </div>
                    <div class="faq__icons">
                        <i class='bx bx-chevron-down'></i>
                        <i class='bx bx-chevron-up'></i>
                    </div>
                </div>
                <div class="faq__answer">
                    Gwiji's premium options offer added advantages. For founders, the premium package includes coaching sessions, investor referrals, and a free trial period. Premium investors gain exclusive access to hot startups, share bonuses, and Q&A sessions with founders.
                </div>
            
            </div>
            <div class="faq__container-item">
                <div class="faq__top">
                    <div class="faq__title">
                        <p>How can I stay updated on Gwiji's latest developments and campaigns?</p>
                    </div>
                    <div class="faq__icons">
                        <i class='bx bx-chevron-down'></i>
                        <i class='bx bx-chevron-up'></i>
                    </div>
                </div>
                <div class="faq__answer">
                    To stay updated, simply subscribe to our newsletter and follow us on our social media channels. We regularly share news, updates, and featured campaigns to keep our community informed.
                </div>
            
            </div>
            <div class="faq__container-item">
                <div class="faq__top">
                    <div class="faq__title">
                        <p>How can I get in touch with the Gwiji team for further inquiries?</p>
                    </div>
                    <div class="faq__icons">
                        <i class='bx bx-chevron-down'></i>
                        <i class='bx bx-chevron-up'></i>
                    </div>
                </div>
                <div class="faq__answer">
                    We're here to help! You can reach out to our support team through the "Contact Us" section of our website. We're committed to providing prompt assistance and addressing any questions or concerns you may have.
                </div>
            
            </div>
        </div>
    </div>
</section>

<script>
    const faqItems = document.querySelectorAll('.faq__container-item');

    faqItems.forEach((item) => {
        item.addEventListener('click', () => {
            faqItems.forEach((otherItem) => {
                if (item !== otherItem) {
                    otherItem.classList.remove('active');
                }
            });
            item.classList.toggle('active');
        });
    });

</script>

<script>
    function filterSearchCampaigns() {
        const campaignItems = document.querySelectorAll('.browse__campaign-item');
        const searchInput = document.querySelector('#search-input').value.toLowerCase();

        campaignItems.forEach(item => {
            const campaignTitle = item.querySelector('.browse__campaign-title').textContent.toLowerCase();
            const campaignSubtitle = item.querySelector('.browse__campaign-description').textContent.toLowerCase();

            // Check if the campaign matches the search input in title or subtitle
            const titleMatch = campaignTitle.includes(searchInput);
            const subtitleMatch = campaignSubtitle.includes(searchInput);

            if (titleMatch || subtitleMatch) {
                item.style.display = 'block';
            } else {
                item.style.display = 'none';
            }
        });
    }

    // Add an event listener to the search input
    document.getElementById('search-input').addEventListener('input', filterSearchCampaigns);
</script>

<script>
    function activateFilter(filterId) {
        // Scroll to the campaigns container
        const campaignsContainer = document.querySelector('.campaign__container-results');
        campaignsContainer.scrollIntoView({ behavior: 'smooth' });

        // Activate the specified category filter by simulating a click
        const categoryButton = document.querySelector(filterId);
        if (categoryButton) {
            categoryButton.click();
        }
    }
</script>

<script>
    function updateRelativeTime() {
        const timeElements = document.querySelectorAll('.community__post-time');
        const now = Math.floor(Date.now() / 1000); // Current time in seconds

        timeElements.forEach((timeElement) => {
            const postTimestamp = parseInt(timeElement.getAttribute('data-post-timestamp'));
            const timeDifference = now - postTimestamp;

            if (timeDifference < 60) {
            // Less than a minute
            timeElement.textContent = timeDifference + ' seconds ago';
            } else if (timeDifference < 3600) {
            // Less than an hour
            timeElement.textContent = Math.floor(timeDifference / 60) + ' minutes ago';
            } else if (timeDifference < 86400) {
            // Less than a day
            timeElement.textContent = Math.floor(timeDifference / 3600) + ' hours ago';
            } else {
            // More than a day, show the full date
            const date = new Date(postTimestamp * 1000);
            const formattedDate = date.toLocaleDateString('en-US', {
                month: 'short',
                day: 'numeric',
            });
            timeElement.textContent = formattedDate;
            }
        });
    }

    // Call the function initially to format existing timestamps
    updateRelativeTime();

    // You can also set an interval to periodically update the timestamps
    setInterval(updateRelativeTime, 60000); // Update every minute

</script>

<script>
    // Get all <p> elements with the "total-raised" and "current-raise" classes
    var totalStartups = document.querySelectorAll(".hero__section-analytics-startups");
    var amountCrowdfunded = document.querySelectorAll(".hero__section-analytics-money-raised");
    var totalInvestors = document.querySelectorAll(".hero__section-analytics-investors");

    // Function to format a number with commas
    function formatNumberWithCommas(number) {
        return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    // Loop through each <p> element and update its content with formatted numbers
    totalStartups.forEach(function (element) {
        var value = parseFloat(element.textContent);
        if (!isNaN(value)) {
            element.textContent = formatNumberWithCommas(value);
        }
    });

    totalInvestors.forEach(function (element) {
        var value = parseFloat(element.textContent);
        if (!isNaN(value)) {
            element.textContent = formatNumberWithCommas(value);
        }
    });

    amountCrowdfunded.forEach(function (element) {
        var value = parseFloat(element.textContent);
        if (!isNaN(value)) {
            element.textContent = "$" + formatNumberWithCommas(value);
        }
    });
</script>


{% endblock %}





